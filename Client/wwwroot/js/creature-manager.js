let e=null,t=null;function SyncMonsterData(){e||(e=new Worker("/js/db-worker.js"))}function LookupCreature(s){return new Promise((r=>{e||r([]),t=uid(),e.onmessage=e=>{const s=e.data;if(s.messageUid===t){const e={...s.creature};e.BaseName=toUpper(e.BaseName),r(JSON.stringify(e))}else r(JSON.stringify([]))},e.postMessage({type:"lookup",query:s,messageUid:t})}))}function AddCustomCreature(t){e&&e.postMessage({type:"add",creature:t})}function GetCreatures(){return new Promise((s=>{e||s([]),t=uid(),e.onmessage=e=>{const r=e.data;r.messageUid===t?s(JSON.stringify(r.creatures)):s(JSON.stringify([]))},e.postMessage({type:"get",messageUid:t})}))}function uid(){return new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-")}